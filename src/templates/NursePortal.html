<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shift Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    body {
      font-family: 'Inter', sans-serif;
    }

    .healthcare-pattern {
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23f1f5f9' fill-opacity='0.4'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .shift-card {
      transition: all 0.2s ease;
    }

    .shift-card:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>

<body class="bg-slate-50 healthcare-pattern min-h-screen">


  <!-- Header -->
  <header class="bg-white shadow-sm border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mr-3">
            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z">
              </path>
            </svg>
          </div>
          <h1 class="text-xl font-semibold text-gray-900">Healthcare Portal</h1>
        </div>
        <div class="flex items-center space-x-4">
          <span class="text-sm text-gray-600">Welcome, Sarah Johnson RN</span>
          <button onclick="showLogout()" class="text-sm text-blue-600 hover:text-blue-500 font-medium">Sign Out</button>
        </div>
      </div>
    </div>
  </header>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Page Title -->
    <div class="mb-8">
      <h2 class="text-3xl font-bold text-gray-900 mb-2">Shift Management</h2>
      <p class="text-gray-600">Manage your shift preferences and view your current schedule</p>
    </div>

    <!-- Tab Navigation -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8">
      <div class="border-b border-gray-200">
        <nav class="flex space-x-8 px-6" aria-label="Tabs">
          <button onclick="switchTab('schedule')" id="scheduleTab"
            class="border-b-2 border-blue-500 py-4 px-1 text-sm font-medium text-blue-600">
            Current Schedule
          </button>
          <button onclick="switchTab('preferences')" id="preferencesTab"
            class="border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300">
            Shift Preferences
          </button>
        </nav>
      </div>

      <!-- Current Schedule Tab Content -->
      <div id="scheduleContent" class="p-6">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3 class="text-xl font-semibold text-gray-900 mb-1">Current Schedule</h3>
            <p class="text-sm text-gray-600">Your assigned shifts for the current 2 weeks</p>
          </div>
          <div class="bg-green-50 px-3 py-1 rounded-full">
            <span class="text-xs font-medium text-green-700" id="currentWeeksRange"></span>
          </div>
        </div>

        <!-- Calendar View -->
        <div class="bg-white border border-gray-200 rounded-lg overflow-hidden">
          <!-- Calendar Header -->
          <div class="bg-gray-50 px-4 py-3 border-b border-gray-200">
            <div class="grid grid-cols-7 gap-1">
              <div class="text-center text-xs font-medium text-gray-500 py-2">Sun</div>
              <div class="text-center text-xs font-medium text-gray-500 py-2">Mon</div>
              <div class="text-center text-xs font-medium text-gray-500 py-2">Tue</div>
              <div class="text-center text-xs font-medium text-gray-500 py-2">Wed</div>
              <div class="text-center text-xs font-medium text-gray-500 py-2">Thu</div>
              <div class="text-center text-xs font-medium text-gray-500 py-2">Fri</div>
              <div class="text-center text-xs font-medium text-gray-500 py-2">Sat</div>
            </div>
          </div>

          <!-- Calendar Body -->
          <div id="calendarGrid" class="grid grid-cols-7 gap-0">
            <!-- Calendar days will be populated by JavaScript -->
          </div>
        </div>

        <div class="mt-6 pt-4 border-t border-gray-200">
          <div class="flex items-center text-sm text-gray-600">
            <svg class="w-4 h-4 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span id="totalHours">Total: 0 hours this period</span>
          </div>
        </div>
      </div>

      <!-- Shift Preferences Tab Content -->
      <div id="preferencesContent" class="p-6 hidden">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3 class="text-xl font-semibold text-gray-900 mb-1">Shift Preferences</h3>
            <p class="text-sm text-gray-600">Set your availability for the next 2 weeks</p>
          </div>
          <div class="bg-blue-50 px-3 py-1 rounded-full">
            <span class="text-xs font-medium text-blue-700" id="nextWeeksRange"></span>
          </div>
        </div>

        <div class="space-y-4" id="preferencesContainer">
          <!-- Days will be populated by JavaScript -->
        </div>

        <div class="mt-6 pt-4 border-t border-gray-200">
          <button onclick="savePreferences()"
            class="w-full bg-blue-600 text-white py-2.5 px-4 rounded-md font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 transition-colors duration-200">
            Save Preferences
          </button>
        </div>
      </div>
    </div>

    <!-- Legend - Only show shift times when on schedule tab -->
    <div id="scheduleLegend" class="mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6">
      <h4 class="text-lg font-semibold text-gray-900 mb-4">Shift Information</h4>

      <!-- Shift Times -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="flex items-center">
          <div class="w-4 h-4 bg-yellow-400 rounded mr-3"></div>
          <div>
            <span class="font-medium text-gray-900">Morning Shift</span>
            <p class="text-sm text-gray-600">7:00 AM - 3:00 PM (8 hours)</p>
          </div>
        </div>
        <div class="flex items-center">
          <div class="w-4 h-4 bg-orange-400 rounded mr-3"></div>
          <div>
            <span class="font-medium text-gray-900">Evening Shift</span>
            <p class="text-sm text-gray-600">3:00 PM - 11:00 PM (8 hours)</p>
          </div>
        </div>
        <div class="flex items-center">
          <div class="w-4 h-4 bg-purple-400 rounded mr-3"></div>
          <div>
            <span class="font-medium text-gray-900">Night Shift</span>
            <p class="text-sm text-gray-600">11:00 PM - 7:00 AM (8 hours)</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Preferences Legend - Only show when on preferences tab -->
    <div id="preferencesLegend" class="mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6 hidden">
      <h4 class="text-lg font-semibold text-gray-900 mb-4">Shift Information & Preferences</h4>

      <!-- Shift Times -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div class="flex items-center">
          <div class="w-4 h-4 bg-yellow-400 rounded mr-3"></div>
          <div>
            <span class="font-medium text-gray-900">Morning Shift</span>
            <p class="text-sm text-gray-600">7:00 AM - 3:00 PM (8 hours)</p>
          </div>
        </div>
        <div class="flex items-center">
          <div class="w-4 h-4 bg-orange-400 rounded mr-3"></div>
          <div>
            <span class="font-medium text-gray-900">Evening Shift</span>
            <p class="text-sm text-gray-600">3:00 PM - 11:00 PM (8 hours)</p>
          </div>
        </div>
        <div class="flex items-center">
          <div class="w-4 h-4 bg-purple-400 rounded mr-3"></div>
          <div>
            <span class="font-medium text-gray-900">Night Shift</span>
            <p class="text-sm text-gray-600">11:00 PM - 7:00 AM (8 hours)</p>
          </div>
        </div>
      </div>

      <!-- Preference Options -->
      <div class="border-t border-gray-200 pt-4">
        <h5 class="font-medium text-gray-900 mb-3">Preference Options</h5>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="flex items-center">
            <div class="w-6 h-6 bg-red-100 border border-red-400 rounded mr-3 flex items-center justify-center">
              <svg class="w-3 h-3 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </div>
            <div>
              <span class="font-medium text-gray-900">Not Available</span>
              <p class="text-sm text-gray-600">Cannot work this shift</p>
            </div>
          </div>
          <div class="flex items-center">
            <div class="w-6 h-6 bg-green-100 border border-green-400 rounded mr-3 flex items-center justify-center">
              <svg class="w-3 h-3 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
            </div>
            <div>
              <span class="font-medium text-gray-900">Prefer</span>
              <p class="text-sm text-gray-600">Would like to work this shift</p>
            </div>
          </div>
          <div class="flex items-center">
            <div class="w-6 h-6 bg-yellow-100 border border-yellow-400 rounded mr-3 flex items-center justify-center">
              <svg class="w-3 h-3 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
              </svg>
            </div>
            <div>
              <span class="font-medium text-gray-900">Prefer Not To</span>
              <p class="text-sm text-gray-600">Available but would rather not</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="successModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 max-w-sm mx-4 shadow-lg">
      <div class="text-center">
        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
        </div>
        <h3 class="text-lg font-semibold text-gray-900 mb-2">Preferences Saved!</h3>
        <p class="text-gray-600 mb-4 text-sm">Your shift preferences have been updated successfully.</p>
        <button onclick="closeModal()"
          class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors text-sm font-medium">
          Got it
        </button>
      </div>
    </div>
  </div>

  <!-- Demo Modal -->
  <div id="demoModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 max-w-sm mx-4 shadow-lg">
      <div class="text-center">
        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
        </div>
        <h3 class="text-lg font-semibold text-gray-900 mb-2">Demo Interface</h3>
        <p id="modalMessage" class="text-gray-600 mb-4 text-sm"></p>
        <button onclick="closeModal()"
          class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm font-medium">
          Got it
        </button>
      </div>
    </div>
  </div>

  <script>
    // Sample current shifts data - 4 shifts first week, 5 shifts second week
    const currentShifts = [
    ];

    // Initialize the dashboard
    function initializeDashboard() {
      generateDateRanges();
      generatePreferencesForm();
      displayCurrentShifts();
    }

    function generateDateRanges() {
      const today = new Date();

      // Next 2 weeks range
      const nextStart = new Date(today);
      nextStart.setDate(today.getDate() + 14);
      const nextEnd = new Date(nextStart);
      nextEnd.setDate(nextStart.getDate() + 13);

      // Current 2 weeks range
      const currentStart = new Date(today);
      const currentEnd = new Date(today);
      currentEnd.setDate(today.getDate() + 13);

      document.getElementById('nextWeeksRange').textContent =
        `${formatDate(nextStart)} - ${formatDate(nextEnd)}`;
      document.getElementById('currentWeeksRange').textContent =
        `${formatDate(currentStart)} - ${formatDate(currentEnd)}`;
    }

    function generatePreferencesForm() {
      const container = document.getElementById('preferencesContainer');
      const today = new Date();

      for (let i = 14; i < 28; i++) {
        const date = new Date(today);
        date.setDate(today.getDate() + i);

        const dayCard = createPreferenceCard(date);
        container.appendChild(dayCard);
      }
    }

    function createPreferenceCard(date) {
      const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });
      const dateStr = formatDate(date);
      const dateId = date.toISOString().split('T')[0];

      const card = document.createElement('div');
      card.className = 'shift-card bg-gray-50 rounded-lg p-4 border border-gray-200';

      card.innerHTML = `
                <div class="mb-3">
                    <div class="font-medium text-gray-900 text-sm">${dayName}, ${dateStr}</div>
                </div>
                
                <div class="space-y-3">
                    <!-- Morning Shift -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-yellow-400 rounded mr-2"></div>
                            <span class="text-sm text-gray-700">Morning (7AM-3PM)</span>
                        </div>
                        <div class="flex space-x-1">
                            <label class="relative">
                                <input type="radio" name="morning_${dateId}" value="not_available" class="sr-only peer">
                                <div class="w-6 h-6 border border-gray-300 rounded cursor-pointer peer-checked:bg-red-100 peer-checked:border-red-400 transition-all flex items-center justify-center" title="Not Available">
                                    <svg class="w-3 h-3 text-red-500 peer-checked:opacity-100 opacity-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="morning_${dateId}" value="prefer" class="sr-only peer">
                                <div class="w-6 h-6 border border-gray-300 rounded cursor-pointer peer-checked:bg-green-100 peer-checked:border-green-400 transition-all flex items-center justify-center" title="Prefer">
                                    <svg class="w-3 h-3 text-green-600 peer-checked:opacity-100 opacity-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                    </svg>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="morning_${dateId}" value="prefer_not" class="sr-only peer">
                                <div class="w-6 h-6 border border-gray-300 rounded cursor-pointer peer-checked:bg-yellow-100 peer-checked:border-yellow-400 transition-all flex items-center justify-center" title="Prefer Not To">
                                    <svg class="w-3 h-3 text-yellow-600 peer-checked:opacity-100 opacity-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                                    </svg>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Evening Shift -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-orange-400 rounded mr-2"></div>
                            <span class="text-sm text-gray-700">Evening (3PM-11PM)</span>
                        </div>
                        <div class="flex space-x-1">
                            <label class="relative">
                                <input type="radio" name="evening_${dateId}" value="not_available" class="sr-only peer">
                                <div class="w-6 h-6 border border-gray-300 rounded cursor-pointer peer-checked:bg-red-100 peer-checked:border-red-400 transition-all flex items-center justify-center" title="Not Available">
                                    <svg class="w-3 h-3 text-red-500 peer-checked:opacity-100 opacity-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="evening_${dateId}" value="prefer" class="sr-only peer">
                                <div class="w-6 h-6 border border-gray-300 rounded cursor-pointer peer-checked:bg-green-100 peer-checked:border-green-400 transition-all flex items-center justify-center" title="Prefer">
                                    <svg class="w-3 h-3 text-green-600 peer-checked:opacity-100 opacity-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                    </svg>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="evening_${dateId}" value="prefer_not" class="sr-only peer">
                                <div class="w-6 h-6 border border-gray-300 rounded cursor-pointer peer-checked:bg-yellow-100 peer-checked:border-yellow-400 transition-all flex items-center justify-center" title="Prefer Not To">
                                    <svg class="w-3 h-3 text-yellow-600 peer-checked:opacity-100 opacity-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                                    </svg>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Night Shift -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-purple-400 rounded mr-2"></div>
                            <span class="text-sm text-gray-700">Night (11PM-7AM)</span>
                        </div>
                        <div class="flex space-x-1">
                            <label class="relative">
                                <input type="radio" name="night_${dateId}" value="not_available" class="sr-only peer">
                                <div class="w-6 h-6 border border-gray-300 rounded cursor-pointer peer-checked:bg-red-100 peer-checked:border-red-400 transition-all flex items-center justify-center" title="Not Available">
                                    <svg class="w-3 h-3 text-red-500 peer-checked:opacity-100 opacity-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="night_${dateId}" value="prefer" class="sr-only peer">
                                <div class="w-6 h-6 border border-gray-300 rounded cursor-pointer peer-checked:bg-green-100 peer-checked:border-green-400 transition-all flex items-center justify-center" title="Prefer">
                                    <svg class="w-3 h-3 text-green-600 peer-checked:opacity-100 opacity-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                    </svg>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="night_${dateId}" value="prefer_not" class="sr-only peer">
                                <div class="w-6 h-6 border border-gray-300 rounded cursor-pointer peer-checked:bg-yellow-100 peer-checked:border-yellow-400 transition-all flex items-center justify-center" title="Prefer Not To">
                                    <svg class="w-3 h-3 text-yellow-600 peer-checked:opacity-100 opacity-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                                    </svg>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            `;

      return card;
    }

    function displayCurrentShifts() {
      const calendarGrid = document.getElementById('calendarGrid');
      const today = new Date();
      let totalHours = 0;

      // Get the start of the current 2-week period (start from today)
      const startDate = new Date(today);

      // Find the first Sunday of the period or before
      const firstSunday = new Date(startDate);
      firstSunday.setDate(startDate.getDate() - startDate.getDay());

      // Generate calendar for 2 weeks (14 days) but show full weeks
      const calendarDays = [];
      for (let i = 0; i < 14; i++) {
        const date = new Date(firstSunday);
        date.setDate(firstSunday.getDate() + i);
        calendarDays.push(date);
      }

      calendarDays.forEach(date => {
        const dateStr = date.toISOString().split('T')[0];
        const shift = currentShifts.find(s => s.date === dateStr);
        const isCurrentPeriod = date >= today && date < new Date(today.getTime() + 14 * 24 * 60 * 60 * 1000);

        const dayCell = createCalendarDay(date, shift, isCurrentPeriod);
        calendarGrid.appendChild(dayCell);

        if (shift && isCurrentPeriod) {
          totalHours += 8; // Each shift is 8 hours
        }
      });

      document.getElementById('totalHours').textContent = `Total: ${totalHours} hours this period`;
    }

    function createCalendarDay(date, shift, isCurrentPeriod) {
      const dayNumber = date.getDate();
      const isToday = date.toDateString() === new Date().toDateString();

      const cell = document.createElement('div');
      cell.className = `min-h-[80px] border-r border-b border-gray-200 p-2 ${isCurrentPeriod ? 'bg-white' : 'bg-gray-50'}`;

      let content = `
                <div class="text-sm font-medium ${isToday ? 'text-blue-600' : isCurrentPeriod ? 'text-gray-900' : 'text-gray-400'} mb-1">
                    ${dayNumber}
                </div>
            `;

      if (shift) {
        const shiftColors = {
          morning: { bg: 'bg-yellow-100', text: 'text-yellow-800', border: 'border-yellow-300' },
          evening: { bg: 'bg-orange-100', text: 'text-orange-800', border: 'border-orange-300' },
          night: { bg: 'bg-purple-100', text: 'text-purple-800', border: 'border-purple-300' }
        };

        const colors = shiftColors[shift.shift];
        const shiftLabels = {
          morning: 'Morning',
          evening: 'Evening',
          night: 'Night'
        };

        content += `
                    <div class="text-xs ${colors.bg} ${colors.text} ${colors.border} border rounded px-2 py-1 mb-1">
                        ${shiftLabels[shift.shift]}
                    </div>
                    <div class="text-xs ${shift.confirmed ? 'text-green-600' : 'text-yellow-600'} font-medium">
                        ${shift.confirmed ? '✓ Confirmed' : '⏳ Pending'}
                    </div>
                `;
      } else if (isCurrentPeriod) {
        content += `
                    <div class="text-xs text-gray-400 italic">
                        Off
                    </div>
                `;
      }

      cell.innerHTML = content;
      return cell;
    }



    function formatDate(date) {
      return date.toLocaleDateString('en-US', {
        month: 'short',
        day: 'numeric'
      });
    }



    function savePreferences() {
      const preferences = {};
      const radioButtons = document.querySelectorAll('input[type="radio"]:checked');

      radioButtons.forEach(radio => {
        const [shift, dateId] = radio.name.split('_');
        if (!preferences[dateId]) {
          preferences[dateId] = {};
        }
        preferences[dateId][shift] = radio.value;
      });

      // Show success modal
      document.getElementById('successModal').classList.remove('hidden');
      document.getElementById('successModal').classList.add('flex');
    }

    function showLogout() {
      showModal('This is a demo interface. In a real application, this would securely log you out and return to the login page.');
    }

    function showModal(message) {
      document.getElementById('modalMessage').textContent = message;
      document.getElementById('demoModal').classList.remove('hidden');
      document.getElementById('demoModal').classList.add('flex');
    }

    function closeModal() {
      document.getElementById('demoModal').classList.add('hidden');
      document.getElementById('demoModal').classList.remove('flex');
      document.getElementById('successModal').classList.add('hidden');
      document.getElementById('successModal').classList.remove('flex');
    }

    function switchTab(tabName) {
      // Hide all tab contents
      document.getElementById('preferencesContent').classList.add('hidden');
      document.getElementById('scheduleContent').classList.add('hidden');

      // Hide all legends
      document.getElementById('scheduleLegend').classList.add('hidden');
      document.getElementById('preferencesLegend').classList.add('hidden');

      // Reset all tab buttons
      document.getElementById('preferencesTab').className = 'border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300';
      document.getElementById('scheduleTab').className = 'border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300';

      // Show selected tab content and activate button
      if (tabName === 'schedule') {
        document.getElementById('scheduleContent').classList.remove('hidden');
        document.getElementById('scheduleTab').className = 'border-b-2 border-blue-500 py-4 px-1 text-sm font-medium text-blue-600';
        document.getElementById('scheduleLegend').classList.remove('hidden');
      } else if (tabName === 'preferences') {
        document.getElementById('preferencesContent').classList.remove('hidden');
        document.getElementById('preferencesTab').className = 'border-b-2 border-blue-500 py-4 px-1 text-sm font-medium text-blue-600';
        document.getElementById('preferencesLegend').classList.remove('hidden');
      }
    }

    // Initialize dashboard when page loads
    window.addEventListener('load', initializeDashboard);
  </script>
  <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'96cf0ce6f72fc21f',t:'MTc1NDgyNDI2NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>